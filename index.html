<!DOCTYPE html>
<html lang="es">
<head>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyAXlpmbW8rrUp1syiFBDsNvomDdXdThtNo",
                authDomain: "fuelgo-app.firebaseapp.com",
                projectId: "fuelgo-app",
                storageBucket: "fuelgo-app.firebasestorage.app",
                messagingSenderId: "394707233601",
                appId: "1:394707233601:web:c3486f8dab5b0c66580fc0",
                measurementId: "G-JFLP9MJNJD"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
        </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FuelsGO</title>
    <link rel="icon" href="imagenes/logo-favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6011215146846818" crossorigin="anonymous"></script>
</head>
<body class="is-authenticating">

    <div id="side-menu-overlay" class="menu-overlay"></div>
    <nav id="side-menu" class="side-menu" aria-hidden="true">
        <div class="menu-header">
            <h2 style="display:flex;align-items:center;justify-content:center;">
                <img src="imagenes/logo-web.png" alt="FuelsGO Logo" style="height:2.8em;width:auto;max-width:170px;object-fit:contain;vertical-align:middle;">
            </h2>
            <button id="menu-close-btn" class="menu-button close" aria-label="Cerrar menú">&times;</button>
        </div>
        <p class="menu-version">Versión 1.1.0</p>
        <hr class="menu-divider">
        <div class="menu-section">
            <h3>Perfil de Usuario</h3>
            <p>Tu ID de usuario es: <strong id="menu-user-id">Cargando...</strong></p>
        </div>
        <hr class="menu-divider">
        <div class="menu-section menu-options">
            <a href="quienes-somos.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="4"/><path d="M6 20v-2a6 6 0 0 1 12 0v2"/></svg>
                </span>
                Quiénes Somos <span class="menu-arrow">&gt;</span>
            </a>
            <a href="contacto.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><polyline points="22,6 12,13 2,6"/></svg>
                </span>
                Contacto <span class="menu-arrow">&gt;</span>
            </a>
            <a href="politica-privacidad.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="8" x2="16" y2="8"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></svg>
                </span>
                Política de Privacidad <span class="menu-arrow">&gt;</span>
            </a>
            <a href="terminos-condiciones.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M7 7h10v10H7z"/></svg>
                </span>
                Términos y Condiciones <span class="menu-arrow">&gt;</span>
            </a>
            <a href="faq.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                </span>
                Preguntas Frecuentes <span class="menu-arrow">&gt;</span>
            </a>
            <a href="tutorial.html" class="menu-link">
                <span class="menu-icon" aria-hidden="true">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 7L12 3 2 7l10 4 10-4z"/><path d="M6 10v6a6 6 0 0 0 12 0v-6"/></svg>
                </span>
                Tutorial <span class="menu-arrow">&gt;</span>
            </a>
        </div>
    </nav>

    <div id="ios-install-banner" class="install-banner" hidden>
        <span>Para instalar la app, toca Compartir y luego "Agregar a inicio".</span>
        <button id="ios-install-close-btn" aria-label="Cerrar">&times;</button>
    </div>

    <div id="android-install-banner" class="install-banner" hidden>
        <span>Para instalar la app en Android, toca el menú de tres puntos <b>⋮</b> y selecciona "Agregar a pantalla de inicio".</span>
        <button id="android-install-close-btn" aria-label="Cerrar">&times;</button>
    </div>

    <header>
        <button id="menu-toggle-btn" class="menu-button" aria-label="Abrir menú">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </button>
        <h1 id="app-title" style="margin:0;display:flex;align-items:center;justify-content:center;">
            <img src="imagenes/logo-web.png" alt="FuelsGO Logo" style="height:48px;width:auto;max-width:180px;object-fit:contain;vertical-align:middle;">
        </h1>
        <button id="theme-toggle-btn" class="menu-button" aria-label="Cambiar Tema">
            </button>
    </header>
    
    <main>
        <div class="legend-card">
            <div class="legend-item"><span class="legend-dot" style="background-color: var(--flow-ligera);"></span><strong>Ligera:</strong> Poca gente, servicio rápido.</div>
            <div class="legend-item"><span class="legend-dot" style="background-color: var(--flow-moderada);"></span><strong>Moderada:</strong> Hay que esperar, pero fluye.</div>
            <div class="legend-item"><span class="legend-dot" style="background-color: var(--flow-congestionada);"></span><strong>Congestionada:</strong> Mucha gente, larga espera.</div>
        </div>

        <div style="margin-bottom:18px;">
            <input type="text" id="station-search" placeholder="Buscar estación o dirección..." style="width:100%;padding:10px 14px;border-radius:8px;border:1px solid var(--border-color);font-size:1em;">
        </div>
<div style="text-align: center; margin-bottom: 18px;">
<script type="text/javascript">
	atOptions = {
		'key' : '29cf9d70343ee6fe9e8f6f3e875dd5b7',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/29cf9d70343ee6fe9e8f6f3e875dd5b7/invoke.js"></script>
</div>
        <ul id="station-list" aria-live="polite">
            <p class="initial-message">Conectando con la base de datos...</p>
        </ul>
    </main>

    <div id="admin-panel">
        <div class="admin-header">
            <h2>Panel de Administración</h2>
            <button id="admin-return-btn" class="admin-button">Volver al Mapa</button>
        </div>

        <div class="admin-section">
            <h3>Actualizaciones de usuarios</h3>
            <div class="admin-controls">
                <div class="admin-control-group">
                    <label style="font-weight:bold;">Usuarios conectados en tiempo real:</label>
                    <span id="online-users-count" style="color:var(--primary-color);font-weight:bold;">0</span>
                </div>
                <div class="admin-control-group">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <label style="font-weight:bold;">Últimas estaciones actualizadas:</label>
                        <button id="refresh-latest-stations" class="admin-button" type="button" style="padding:4px 12px;font-size:0.98em;">Actualizar</button>
                    </div>
                    <ul id="latest-stations-list" style="margin:8px 0 0 0;padding:0;list-style:none;"></ul>
                </div>
            </div>
        </div>

    <div class="admin-section">
        <div class="admin-section">
            <h3>Reporte en lote</h3>
            <div class="admin-controls">
                <div class="admin-control-group" style="width:100%;">
                    <label for="batch-report-text">Pega aquí el mensaje de actualización:</label>
                    <textarea id="batch-report-text" rows="8" style="width:100%;resize:vertical;border-radius:8px;padding:10px;"></textarea>
                    <div style="display:flex;gap:10px;margin-top:10px;">
                        <button id="batch-clean-btn" class="admin-button" type="button">Eliminar caracteres</button>
                        <button id="batch-report-btn" class="admin-button" type="button">Cargar reportes</button>
                    </div>
                </div>
            </div>
        </div>
            <h3>Controles Generales</h3>
            <div class="admin-controls">
                 <div class="admin-control-group">
                    <label for="delete-report-select">Borrar Reporte de Estación:</label>
                    <select id="delete-report-select" aria-label="Seleccionar estación para borrar reporte"></select>
                    <button id="delete-report-btn" class="admin-button">Borrar Reporte</button>
                </div>
            </div>
        </div>

        <div class="admin-section">
            <h3>Gestión de Usuarios</h3>
            <div class="admin-controls">
                <div class="admin-control-group">
                    <label for="ban-user-id">Bloquear Usuario por ID:</label>
                    <input type="text" id="ban-user-id" placeholder="Introduce el ID del usuario...">
                    <select id="ban-user-select" aria-label="Seleccionar usuario de la lista para bloquear"></select>
                    <button id="ban-user-btn" class="admin-button">Bloquear Usuario</button>
                </div>
                <div class="admin-control-group">
                    <p>Usuarios Bloqueados:</p>
                    <ul id="banned-users-list"></ul>
                </div>
            </div>
        </div>
        
        <div class="admin-section">
            <h3>Opciones Peligrosas</h3>
            <div class="admin-controls">
                <div class="admin-control-group">
                    <button id="init-db-btn" class="admin-button danger">Inicializar Estaciones en DB (Solo 1 vez)</button>
                    <button id="admin-logout-btn" class="admin-button danger">Cerrar Sesión de Admin</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="confirmation-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <h2 id="modal-title">Confirmar Reporte</h2>
            <p>Por favor, asegúrate de que tu reporte sea verídico. La información falsa perjudica a la comunidad.</p>
            <div class="modal-actions">
                <button id="cancel-report-btn" class="modal-button cancel">Cancelar</button>
                <button id="confirm-report-btn" class="modal-button confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="admin-login-modal" role="dialog" aria-modal="true" aria-labelledby="admin-login-title">
        <div class="modal-content">
            <h2 id="admin-login-title">Acceso de Administrador</h2>
            <form id="admin-login-form">
                <div class="admin-control-group">
                    <label for="admin-email">Correo Electrónico:</label>
                    <input type="email" id="admin-email" required>
                </div>
                <div class="admin-control-group">
                    <label for="admin-password">Contraseña:</label>
                    <input type="password" id="admin-password" required autocomplete="current-password" style="width:100%;">
                </div>
                <div style="margin-top:6px;margin-bottom:10px;text-align:right;">
                    <a href="#" id="toggle-password-text" style="font-size:0.98em;color:#007bff;cursor:pointer;text-decoration:underline;">Mostrar contraseña</a>
                </div>
                <p id="admin-login-error" class="error-message" hidden></p>
                <div style="height:24px;"></div>
                <div class="modal-actions" style="gap:24px;">
                    <button type="button" id="admin-login-cancel" class="modal-button cancel">Cancelar</button>
                    <button type="submit" class="modal-button confirm">Iniciar Sesión</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="ban-modal" role="dialog" aria-modal="true" aria-labelledby="ban-title">
        <div class="modal-content">
            <h2 id="ban-title">🚨 Estás Bloqueado 🚨</h2>
            <p>Tu cuenta ha sido bloqueada temporalmente por enviar reportes falsos.</p>
            <p>Podrás volver a usar la aplicación en:</p>
            <p id="ban-countdown" style="font-size: 1.5em; font-weight: bold; color: var(--primary-color);">--:--</p>
        </div>
    </div>

    <button id="install-btn" class="install-button" hidden>
    <!-- Botón de instalar app movido al menú lateral -->
    
    <script type="module" src="script.js"></script>

</body>
</html>
